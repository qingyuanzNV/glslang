rayQuery-allOps.frag
// Module Version 10000
// Generated by (magic number): 8000b
// Id's are bound by 257

                              Capability Shader
                              Capability RayQueryKHR
                              Extension  "SPV_KHR_ray_query"
            11_1:             ExtInstImport  "GLSL.std.450"
                              MemoryModel Logical GLSL450
                              EntryPoint Fragment 54_1  "main"
                              ExecutionMode 54_1 OriginUpperLeft
                              Source GLSL 460
                              SourceExtension  "GL_EXT_ray_query"
                              SourceExtension  "GL_NV_ray_tracing"
                              Name 54_1  "main"
                              Name 54_2  "doSomething("
                              Name 30_1  "Ray"
                              MemberName 30_1(Ray) 0  "pos"
                              MemberName 30_1(Ray) 1  "tmin"
                              MemberName 30_1(Ray) 2  "dir"
                              MemberName 30_1(Ray) 3  "tmax"
                              Name 54_3  "makeRayDesc("
                              Name 30_2  "Log"
                              MemberName 30_2(Log) 0  "x"
                              MemberName 30_2(Log) 1  "y"
                              Name 59_1  ""
                              Name 59_13  "ray"
                              Name 59_5  "ray"
                              Name 59_2  "rayQuery"
                              Name 59_3  "rtas"
                              Name 59_6  "candidateType"
                              Name 59_7  "_mat4x3"
                              Name 59_8  "_mat3x4"
                              Name 59_9  "t"
                              Name 59_10  "committedStatus"
                              Name 59_11  "o"
                              Name 59_12  "d"
                              Name 30_3  "Ray"
                              MemberName 30_3(Ray) 0  "pos"
                              MemberName 30_3(Ray) 1  "tmin"
                              MemberName 30_3(Ray) 2  "dir"
                              MemberName 30_3(Ray) 3  "tmax"
                              Name 30_4  "Rays"
                              MemberName 30_4(Rays) 0  "rays"
                              Name 59_4  ""
                              Decorate 30_2(Log) BufferBlock
                              MemberDecorate 30_2(Log) 0 Offset 0
                              MemberDecorate 30_2(Log) 1 Offset 4
                              Decorate 59_1 Binding 0
                              Decorate 59_1 DescriptorSet 0
                              Decorate 59_3(rtas) Binding 1
                              Decorate 59_3(rtas) DescriptorSet 0
                              MemberDecorate 30_3(Ray) 0 Offset 0
                              MemberDecorate 30_3(Ray) 1 Offset 12
                              MemberDecorate 30_3(Ray) 2 Offset 16
                              MemberDecorate 30_3(Ray) 3 Offset 28
                              Decorate 29_1 ArrayStride 32
                              Decorate 30_4(Rays) BufferBlock
                              MemberDecorate 30_4(Rays) 0 Offset 0
                              Decorate 59_4 Binding 2
                              Decorate 59_4 DescriptorSet 0
            19_1:             TypeVoid
            33_1:             TypeFunction 19_1
            22_1:             TypeFloat 32
            23_1:             TypeVector 22_1(float) 3
       30_1(Ray):             TypeStruct 23_1(fvec3) 22_1(float) 23_1(fvec3) 22_1(float)
            33_2:             TypeFunction 30_1(Ray)
            21_1:             TypeInt 32 0
       30_2(Log):             TypeStruct 21_1(int) 21_1(int)
            32_1:             TypePointer Uniform 30_2(Log)
            59_1:   32_1(ptr) Variable Uniform
            21_2:             TypeInt 32 1
            43_1:   21_2(int) Constant 0
         uint(0):   21_1(int) Constant 0
            32_2:             TypePointer Uniform 21_1(int)
            43_2:   21_2(int) Constant 1
            32_3:             TypePointer Function 30_1(Ray)
            43_3: 22_1(float) Constant 0
            44_1: 23_1(fvec3) ConstantComposite 43_3 43_3 43_3
            32_4:             TypePointer Function 23_1(fvec3)
            43_4:   21_2(int) Constant 2
            43_5: 22_1(float) Constant 1065353216
            44_2: 23_1(fvec3) ConstantComposite 43_5 43_3 43_3
            32_5:             TypePointer Function 22_1(float)
            43_6:   21_2(int) Constant 3
            43_7: 22_1(float) Constant 1176255488
          4472_1:             TypeRayQueryKHR
            32_6:             TypePointer Private 4472_1
  59_2(rayQuery):   32_6(ptr) Variable Private
          5341_1:             TypeAccelerationStructureKHR
            32_7:             TypePointer UniformConstant 5341_1
      59_3(rtas):   32_7(ptr) Variable UniformConstant
       uint(255):   21_1(int) Constant 255
            20_1:             TypeBool
            32_8:             TypePointer Function 21_1(int)
            42_1:  20_1(bool) ConstantFalse
            24_1:             TypeMatrix 23_1(fvec3) 4
            32_9:             TypePointer Function 24_1
            23_2:             TypeVector 22_1(float) 4
            24_2:             TypeMatrix 23_2(fvec4) 3
           32_10:             TypePointer Function 24_2
            41_1:  20_1(bool) ConstantTrue
            23_3:             TypeVector 22_1(float) 2
            43_8: 22_1(float) Constant 1056964608
         uint(1):   21_1(int) Constant 1
         uint(2):   21_1(int) Constant 2
       30_3(Ray):             TypeStruct 23_1(fvec3) 22_1(float) 23_1(fvec3) 22_1(float)
            29_1:             TypeRuntimeArray 30_3(Ray)
      30_4(Rays):             TypeStruct 29_1
           32_11:             TypePointer Uniform 30_4(Rays)
            59_4:  32_11(ptr) Variable Uniform
      54_1(main):        19_1 Function None 33_1
           248_1:             Label
       59_5(ray):   32_3(ptr) Variable Function
59_6(candidateType):   32_8(ptr) Variable Function
   59_7(_mat4x3):   32_9(ptr) Variable Function
   59_8(_mat3x4):  32_10(ptr) Variable Function
         59_9(t):   32_5(ptr) Variable Function
59_10(committedStatus):   32_8(ptr) Variable Function
        59_11(o):   32_4(ptr) Variable Function
        59_12(d):   32_4(ptr) Variable Function
            57_1:   30_1(Ray) FunctionCall 54_3(makeRayDesc()
                              Store 59_5(ray) 57_1
            61_1:      5341_1 Load 59_3(rtas)
            65_1:   32_4(ptr) AccessChain 59_5(ray) 43_1
            61_2: 23_1(fvec3) Load 65_1
            65_2:   32_5(ptr) AccessChain 59_5(ray) 43_2
            61_3: 22_1(float) Load 65_2
            65_3:   32_4(ptr) AccessChain 59_5(ray) 43_4
            61_4: 23_1(fvec3) Load 65_3
            65_4:   32_5(ptr) AccessChain 59_5(ray) 43_6
            61_5: 22_1(float) Load 65_4
                              RayQueryInitializeKHR 59_2(rayQuery) 61_1 uint(0) uint(255) 61_2 61_3 61_4 61_5
                              Branch 248_2
           248_2:             Label
                              LoopMerge 248_29 248_28 None
                              Branch 248_3
           248_3:             Label
          4477_1:  20_1(bool) RayQueryProceedKHR 59_2(rayQuery)
                              BranchConditional 4477_1 248_4 248_29
           248_4:               Label
          4479_1:   21_1(int)   RayQueryGetIntersectionTypeKHR 59_2(rayQuery) 43_1
                                Store 59_6(candidateType) 4479_1
            61_6:   21_1(int)   Load 59_6(candidateType)
                                SelectionMerge 248_27 None
                                Switch 61_6 248_27 
                                       case 0: 248_5
                                       case 1: 248_24
           248_5:                 Label
                                  RayQueryTerminateKHR 59_2(rayQuery)
          6031_1:        24_1     RayQueryGetIntersectionObjectToWorldKHR 59_2(rayQuery) 43_1
                                  Store 59_7(_mat4x3) 6031_1
            61_7:        24_1     Load 59_7(_mat4x3)
            84_1:        24_2     Transpose 61_7
                                  Store 59_8(_mat3x4) 84_1
                                  RayQueryConfirmIntersectionKHR 59_2(rayQuery)
          6025_1:  20_1(bool)     RayQueryGetIntersectionFrontFaceKHR 59_2(rayQuery) 43_2
                                  SelectionMerge 248_7 None
                                  BranchConditional 6025_1 248_6 248_7
           248_6:                   Label
            57_2:        19_1       FunctionCall 54_2(doSomething()
                                    Branch 248_7
           248_7:                 Label
          6024_1: 23_3(fvec2)     RayQueryGetIntersectionBarycentricsKHR 59_2(rayQuery) 43_2
            81_1: 22_1(float)     CompositeExtract 6024_1 0
           180_1:  20_1(bool)     FOrdEqual 81_1 43_3
                                  SelectionMerge 248_9 None
                                  BranchConditional 180_1 248_8 248_9
           248_8:                   Label
            57_3:        19_1       FunctionCall 54_2(doSomething()
                                    Branch 248_9
           248_9:                 Label
          6019_1:   21_2(int)     RayQueryGetIntersectionInstanceCustomIndexKHR 59_2(rayQuery) 43_2
           173_1:  20_1(bool)     SGreaterThan 6019_1 43_1
                                  SelectionMerge 248_11 None
                                  BranchConditional 173_1 248_10 248_11
          248_10:                   Label
            57_4:        19_1       FunctionCall 54_2(doSomething()
                                    Branch 248_11
          248_11:                 Label
          6020_1:   21_2(int)     RayQueryGetIntersectionInstanceIdKHR 59_2(rayQuery) 43_2
           173_2:  20_1(bool)     SGreaterThan 6020_1 43_1
                                  SelectionMerge 248_13 None
                                  BranchConditional 173_2 248_12 248_13
          248_12:                   Label
            57_5:        19_1       FunctionCall 54_2(doSomething()
                                    Branch 248_13
          248_13:                 Label
          6027_1: 23_1(fvec3)     RayQueryGetIntersectionObjectRayDirectionKHR 59_2(rayQuery) 43_2
            81_2: 22_1(float)     CompositeExtract 6027_1 0
           186_1:  20_1(bool)     FOrdGreaterThan 81_2 43_3
                                  SelectionMerge 248_15 None
                                  BranchConditional 186_1 248_14 248_15
          248_14:                   Label
            57_6:        19_1       FunctionCall 54_2(doSomething()
                                    Branch 248_15
          248_15:                 Label
          6028_1: 23_1(fvec3)     RayQueryGetIntersectionObjectRayOriginKHR 59_2(rayQuery) 43_2
            81_3: 22_1(float)     CompositeExtract 6028_1 0
           186_2:  20_1(bool)     FOrdGreaterThan 81_3 43_3
                                  SelectionMerge 248_17 None
                                  BranchConditional 186_2 248_16 248_17
          248_16:                   Label
            57_7:        19_1       FunctionCall 54_2(doSomething()
                                    Branch 248_17
          248_17:                 Label
          6023_1:   21_2(int)     RayQueryGetIntersectionPrimitiveIndexKHR 59_2(rayQuery) 43_2
           173_3:  20_1(bool)     SGreaterThan 6023_1 43_1
                                  SelectionMerge 248_19 None
                                  BranchConditional 173_3 248_18 248_19
          248_18:                   Label
            57_8:        19_1       FunctionCall 54_2(doSomething()
                                    Branch 248_19
          248_19:                 Label
          6018_1: 22_1(float)     RayQueryGetIntersectionTKHR 59_2(rayQuery) 43_2
           186_3:  20_1(bool)     FOrdGreaterThan 6018_1 43_3
                                  SelectionMerge 248_21 None
                                  BranchConditional 186_3 248_20 248_21
          248_20:                   Label
            57_9:        19_1       FunctionCall 54_2(doSomething()
                                    Branch 248_21
          248_21:                 Label
          6021_1:   21_1(int)     RayQueryGetIntersectionInstanceShaderBindingTableRecordOffsetKHR 59_2(rayQuery) 43_2
           172_1:  20_1(bool)     UGreaterThan 6021_1 uint(0)
                                  SelectionMerge 248_23 None
                                  BranchConditional 172_1 248_22 248_23
          248_22:                   Label
           57_10:        19_1       FunctionCall 54_2(doSomething()
                                    Branch 248_23
          248_23:                 Label
                                  Branch 248_27
          248_24:                 Label
          6031_2:        24_1     RayQueryGetIntersectionObjectToWorldKHR 59_2(rayQuery) 43_1
                                  Store 59_7(_mat4x3) 6031_2
            61_8:        24_1     Load 59_7(_mat4x3)
            84_2:        24_2     Transpose 61_8
                                  Store 59_8(_mat3x4) 84_2
          6026_1:  20_1(bool)     RayQueryGetIntersectionCandidateAABBOpaqueKHR 59_2(rayQuery)
                                  SelectionMerge 248_26 None
                                  BranchConditional 6026_1 248_25 248_26
          248_25:                   Label
           57_11:        19_1       FunctionCall 54_2(doSomething()
                                    Branch 248_26
          248_26:                 Label
                                  Store 59_9(t) 43_8
            61_9: 22_1(float)     Load 59_9(t)
                                  RayQueryGenerateIntersectionKHR 59_2(rayQuery) 61_9
                                  RayQueryTerminateKHR 59_2(rayQuery)
                                  Branch 248_27
          248_27:               Label
                                Branch 248_28
          248_28:               Label
                                Branch 248_2
          248_29:             Label
            65_5:   32_5(ptr) AccessChain 59_8(_mat3x4) 43_1 uint(0)
           61_10: 22_1(float) Load 65_5
            65_6:   32_5(ptr) AccessChain 59_7(_mat4x3) 43_1 uint(0)
           61_11: 22_1(float) Load 65_6
           180_2:  20_1(bool) FOrdEqual 61_10 61_11
                              SelectionMerge 248_31 None
                              BranchConditional 180_2 248_30 248_31
          248_30:               Label
           57_12:        19_1   FunctionCall 54_2(doSomething()
                                Branch 248_31
          248_31:             Label
          4479_2:   21_1(int) RayQueryGetIntersectionTypeKHR 59_2(rayQuery) 43_2
                              Store 59_10(committedStatus) 4479_2
           61_12:   21_1(int) Load 59_10(committedStatus)
                              SelectionMerge 248_53 None
                              Switch 61_12 248_53 
                                     case 0: 248_32
                                     case 1: 248_33
                                     case 2: 248_38
          248_32:               Label
          6032_1:        24_1   RayQueryGetIntersectionWorldToObjectKHR 59_2(rayQuery) 43_1
                                Store 59_7(_mat4x3) 6032_1
           61_13:        24_1   Load 59_7(_mat4x3)
            84_3:        24_2   Transpose 61_13
                                Store 59_8(_mat3x4) 84_3
                                Branch 248_53
          248_33:               Label
          6032_2:        24_1   RayQueryGetIntersectionWorldToObjectKHR 59_2(rayQuery) 43_2
                                Store 59_7(_mat4x3) 6032_2
           61_14:        24_1   Load 59_7(_mat4x3)
            84_4:        24_2   Transpose 61_14
                                Store 59_8(_mat3x4) 84_4
          6025_2:  20_1(bool)   RayQueryGetIntersectionFrontFaceKHR 59_2(rayQuery) 43_2
                                SelectionMerge 248_35 None
                                BranchConditional 6025_2 248_34 248_35
          248_34:                 Label
           57_13:        19_1     FunctionCall 54_2(doSomething()
                                  Branch 248_35
          248_35:               Label
          6024_2: 23_3(fvec2)   RayQueryGetIntersectionBarycentricsKHR 59_2(rayQuery) 43_2
            81_4: 22_1(float)   CompositeExtract 6024_2 1
           180_3:  20_1(bool)   FOrdEqual 81_4 43_3
                                SelectionMerge 248_37 None
                                BranchConditional 180_3 248_36 248_37
          248_36:                 Label
           57_14:        19_1     FunctionCall 54_2(doSomething()
                                  Branch 248_37
          248_37:               Label
                                Branch 248_53
          248_38:               Label
          6022_1:   21_2(int)   RayQueryGetIntersectionGeometryIndexKHR 59_2(rayQuery) 43_2
           173_4:  20_1(bool)   SGreaterThan 6022_1 43_1
                                SelectionMerge 248_40 None
                                BranchConditional 173_4 248_39 248_40
          248_39:                 Label
           57_15:        19_1     FunctionCall 54_2(doSomething()
                                  Branch 248_40
          248_40:               Label
          6020_2:   21_2(int)   RayQueryGetIntersectionInstanceIdKHR 59_2(rayQuery) 43_2
           173_5:  20_1(bool)   SGreaterThan 6020_2 43_1
                                SelectionMerge 248_42 None
                                BranchConditional 173_5 248_41 248_42
          248_41:                 Label
           57_16:        19_1     FunctionCall 54_2(doSomething()
                                  Branch 248_42
          248_42:               Label
          6019_2:   21_2(int)   RayQueryGetIntersectionInstanceCustomIndexKHR 59_2(rayQuery) 43_2
           173_6:  20_1(bool)   SGreaterThan 6019_2 43_1
                                SelectionMerge 248_44 None
                                BranchConditional 173_6 248_43 248_44
          248_43:                 Label
           57_17:        19_1     FunctionCall 54_2(doSomething()
                                  Branch 248_44
          248_44:               Label
          6027_2: 23_1(fvec3)   RayQueryGetIntersectionObjectRayDirectionKHR 59_2(rayQuery) 43_2
            81_5: 22_1(float)   CompositeExtract 6027_2 2
           186_4:  20_1(bool)   FOrdGreaterThan 81_5 43_3
                                SelectionMerge 248_46 None
                                BranchConditional 186_4 248_45 248_46
          248_45:                 Label
           57_18:        19_1     FunctionCall 54_2(doSomething()
                                  Branch 248_46
          248_46:               Label
          6028_2: 23_1(fvec3)   RayQueryGetIntersectionObjectRayOriginKHR 59_2(rayQuery) 43_2
            81_6: 22_1(float)   CompositeExtract 6028_2 0
           186_5:  20_1(bool)   FOrdGreaterThan 81_6 43_3
                                SelectionMerge 248_48 None
                                BranchConditional 186_5 248_47 248_48
          248_47:                 Label
           57_19:        19_1     FunctionCall 54_2(doSomething()
                                  Branch 248_48
          248_48:               Label
          6023_2:   21_2(int)   RayQueryGetIntersectionPrimitiveIndexKHR 59_2(rayQuery) 43_2
           173_7:  20_1(bool)   SGreaterThan 6023_2 43_1
                                SelectionMerge 248_50 None
                                BranchConditional 173_7 248_49 248_50
          248_49:                 Label
           57_20:        19_1     FunctionCall 54_2(doSomething()
                                  Branch 248_50
          248_50:               Label
          6018_2: 22_1(float)   RayQueryGetIntersectionTKHR 59_2(rayQuery) 43_2
           186_6:  20_1(bool)   FOrdGreaterThan 6018_2 43_3
                                SelectionMerge 248_52 None
                                BranchConditional 186_6 248_51 248_52
          248_51:                 Label
           57_21:        19_1     FunctionCall 54_2(doSomething()
                                  Branch 248_52
          248_52:               Label
                                Branch 248_53
          248_53:             Label
            65_7:   32_5(ptr) AccessChain 59_8(_mat3x4) 43_1 uint(0)
           61_15: 22_1(float) Load 65_7
            65_8:   32_5(ptr) AccessChain 59_7(_mat4x3) 43_1 uint(0)
           61_16: 22_1(float) Load 65_8
           180_4:  20_1(bool) FOrdEqual 61_15 61_16
                              SelectionMerge 248_55 None
                              BranchConditional 180_4 248_54 248_55
          248_54:               Label
           57_22:        19_1   FunctionCall 54_2(doSomething()
                                Branch 248_55
          248_55:             Label
          6017_1:   21_1(int) RayQueryGetRayFlagsKHR 59_2(rayQuery)
           172_2:  20_1(bool) UGreaterThan 6017_1 uint(0)
                              SelectionMerge 248_57 None
                              BranchConditional 172_2 248_56 248_57
          248_56:               Label
           57_23:        19_1   FunctionCall 54_2(doSomething()
                                Branch 248_57
          248_57:             Label
          6016_1: 22_1(float) RayQueryGetRayTMinKHR 59_2(rayQuery)
           186_7:  20_1(bool) FOrdGreaterThan 6016_1 43_3
                              SelectionMerge 248_59 None
                              BranchConditional 186_7 248_58 248_59
          248_58:               Label
           57_24:        19_1   FunctionCall 54_2(doSomething()
                                Branch 248_59
          248_59:             Label
          6030_1: 23_1(fvec3) RayQueryGetWorldRayOriginKHR 59_2(rayQuery)
                              Store 59_11(o) 6030_1
          6029_1: 23_1(fvec3) RayQueryGetWorldRayDirectionKHR 59_2(rayQuery)
                              Store 59_12(d) 6029_1
            65_9:   32_5(ptr) AccessChain 59_11(o) uint(0)
           61_17: 22_1(float) Load 65_9
           65_10:   32_5(ptr) AccessChain 59_12(d) uint(2)
           61_18: 22_1(float) Load 65_10
           180_5:  20_1(bool) FOrdEqual 61_17 61_18
                              SelectionMerge 248_61 None
                              BranchConditional 180_5 248_60 248_61
          248_60:               Label
           57_25:        19_1   FunctionCall 54_2(doSomething()
                                Branch 248_61
          248_61:             Label
                              Return
                              FunctionEnd
54_2(doSomething():        19_1 Function None 33_1
          248_62:             Label
           65_11:   32_2(ptr) AccessChain 59_1 43_1
                              Store 65_11 uint(0)
           65_12:   32_2(ptr) AccessChain 59_1 43_2
                              Store 65_12 uint(0)
                              Return
                              FunctionEnd
54_3(makeRayDesc():   30_1(Ray) Function None 33_2
          248_63:             Label
      59_13(ray):   32_3(ptr) Variable Function
           65_13:   32_4(ptr) AccessChain 59_13(ray) 43_1
                              Store 65_13 44_1
           65_14:   32_4(ptr) AccessChain 59_13(ray) 43_4
                              Store 65_14 44_2
           65_15:   32_5(ptr) AccessChain 59_13(ray) 43_2
                              Store 65_15 43_3
           65_16:   32_5(ptr) AccessChain 59_13(ray) 43_6
                              Store 65_16 43_7
           61_19:   30_1(Ray) Load 59_13(ray)
                              ReturnValue 61_19
                              FunctionEnd
